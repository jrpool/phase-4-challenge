<%- include header.ejs %>

  <div class="main">
    <h2>Album: <%= album.title %></h2>
    <p>by <%= album.artist %></p>
    <h2>Reviews <span class="<%= addReviewClass %> offer alongside"><a href="/albums/<%= album.id %>/reviews/new">Add review</a></span></h2>
    <div class="review-list">
      <% reviewViews.forEach(function(reviewView) {
        const reviewClass
          = reviewView.review_id === target ? 'doomed' : 'normal'
        const editReviewClass
          = !target && reviewView.author_id === userID ? 'visible' : 'invisible'
      %>
        <div class="<%= reviewClass %>">
          <p class="detail minor"><%= reviewView.submission_date %><span class="session <%= editReviewClass %>"><button type="button"><a href="/albums/<%= album.id %>/reviews/<%= reviewView.review_id %>/delete">🗑</a></button></span></p>
          <p class="detail">“<%= reviewView.review %>”</p>
          <p class="detail offset">by <a href="/users/<%= reviewView.author_id %>"><%= reviewView.author_name %></a></p>
        </div>
      <% }) %>
    </div>
  </div>

</body>
</html>
